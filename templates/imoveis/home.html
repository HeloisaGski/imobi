{% extends 'imoveis/base.html' %}
{% load static %}

{% block title %}Luxury Realty - Imobiliária de Luxo{% endblock %}

{% block content %}
<!-- Carousel de Imóveis -->
<div id="propertyCarousel" class="carousel slide mb-5" data-bs-ride="carousel">
  <div class="carousel-inner">
    {% for property in properties|slice:":5" %}
    <div class="carousel-item {% if forloop.first %}active{% endif %}">
      {% if property.image %}
      <img src="{{ property.image.url }}" class="d-block w-100" alt="{{ property.title }}" style="height: 500px; object-fit: cover;">
      {% else %}
      <div class="d-block w-100 bg-secondary d-flex align-items-center justify-content-center" style="height: 500px;">
        <i class="fas fa-home fa-6x text-white"></i>
      </div>
      {% endif %}
      <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-3">
        <h5>{{ property.title }}</h5>
        <p>{{ property.city }} - R$ {{ property.price|floatformat:2 }}</p>
      </div>
    </div>
    {% endfor %}
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#propertyCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Anterior</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#propertyCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Próximo</span>
  </button>
</div>

<!-- Card do Corretor -->
<section class="container mb-5">
  <div class="row align-items-center">
    <div class="col-md-4 text-center">
      <img src="/media/properties/fotosite.jpg" alt="Cristiano Domingues" class="img-fluid rounded-circle mb-3" style="max-width: 250px;">
    </div>
    <div class="col-md-8">
      <h2>Cristiano Domingues</h2>
      <h5 class="text-muted">Especialista em imóveis de luxo</h5>
      <p>Com anos de experiência no mercado imobiliário de luxo, Cristiano Domingues oferece um atendimento personalizado e exclusivo para encontrar o imóvel dos seus sonhos.</p>
      <a href="mailto:cristiano@luxuryrealty.com" class="btn btn-luxury">Entre em contato</a>
    </div>
  </div>
</section>

<!-- Frases e Ícones -->
<section class="bg-light py-5">
  <div class="container">
    <div class="row text-center">
      <div class="col-md-4 mb-4">
        <i class="fas fa-shield-alt fa-3x mb-3 text-luxury"></i>
        <h4>Segurança</h4>
        <p>Garantimos total segurança em todas as transações imobiliárias.</p>
      </div>
      <div class="col-md-4 mb-4">
        <i class="fas fa-star fa-3x mb-3 text-luxury"></i>
        <h4>Excelência</h4>
        <p>Atendimento de alta qualidade para clientes exigentes.</p>
      </div>
      <div class="col-md-4 mb-4">
        <i class="fas fa-handshake fa-3x mb-3 text-luxury"></i>
        <h4>Confiança</h4>
        <p>Construímos relacionamentos duradouros baseados na confiança.</p>
      </div>
    </div>
  </div>
</section>

<!-- Imóveis em Destaque -->
<section class="container my-5">
  <h2 class="mb-4 text-center">Imóveis em Destaque</h2>
  <div class="row">
    {% for property in properties|slice:":6" %}
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="card card-luxury h-100">
        {% if property.image %}
        <img src="{{ property.image.url }}" class="card-img-top" alt="{{ property.title }}">
        {% else %}
        <div class="card-img-top bg-secondary d-flex align-items-center justify-content-center" style="height: 250px;">
          <i class="fas fa-home fa-3x text-white"></i>
        </div>
        {% endif %}
        <div class="card-body">
          <h5 class="card-title">{{ property.title }}</h5>
          <p class="card-text text-muted mb-2">
            <i class="fas fa-map-marker-alt me-1"></i>{{ property.address }}, {{ property.city }}
          </p>
          <p class="price-luxury mb-3">R$ {{ property.price|floatformat:2 }}</p>
          <div class="d-grid gap-2">
            <a href="{% url 'property_detail' property.pk %}" class="btn btn-luxury">Ver Detalhes</a>
            {% if property.whatsapp_number and property.get_whatsapp_link %}
            <a href="{{ property.get_whatsapp_link }}" target="_blank" class="btn btn-whatsapp-luxury">
              <i class="fab fa-whatsapp me-2"></i>Falar no WhatsApp
            </a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    {% empty %}
    <div class="col-12 text-center">
      <div class="card card-luxury">
        <div class="card-body text-center py-5">
          <i class="fas fa-home fa-4x text-muted mb-3"></i>
          <h4 class="card-title">Nenhum imóvel disponível</h4>
          <p class="card-text">No momento não há imóveis cadastrados. Volte em breve!</p>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</section>
{% endblock %}
